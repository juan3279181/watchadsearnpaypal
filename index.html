<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Notcoin - Watch Ads & Earn Coins</title>
  <style>
    body{font-family:Arial,sans-serif;background:#111;color:#fff;margin:0}
    header,footer{background:#000;padding:1em;text-align:center}
    .container{width:95%;max-width:600px;margin:0 auto;padding:10px}
    .card{background:#1e1e1e;border-radius:12px;padding:20px;margin-bottom:15px;text-align:center}
    button{background:orange;color:#000;border:none;border-radius:8px;padding:12px 25px;cursor:pointer}
    button:disabled{opacity:.6;cursor:not-allowed}
    #loadingOverlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .spinner{border:5px solid rgba(255,165,0,.3);border-top:5px solid orange;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin-bottom:12px}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    .ad-status{font-size:13px;margin-top:6px;color:#ffa500}
  </style>

  <!-- ‚úÖ Load Monetag SDK from GitHub Pages -->
  <script src="https://juan3279181.github.io/watchadsearnpaypal/js/monetag-sdk.js" 
          data-zone="10047074" 
          data-sdk="show_10047074">
  </script>
</head>
<body>
  <header><h1>Notcoin</h1><p>Watch Ads & Earn Coins</p></header>

  <div id="loadingOverlay">
    <div class="spinner"></div>
    <div id="loadingText">Loading ad service...</div>
  </div>

  <div class="container">
    <div class="card">
      <h2>Your Balance</h2>
      <h1 id="balance">0 Coins</h1>
    </div>

    <div class="card">
      <h3>Watch Ads & Earn Coins</h3>
      <p>Click a button to watch an ad and earn coins.</p>

      <div class="ad-unit">
        <div class="ad-label">Monetag Rewarded Ad - +250</div>
        <button id="rewardedAdBtn1">üéÅ Watch Rewarded Ad (+250)</button>
        <div class="ad-status" id="adStatus1">‚è≥ Loading ad service...</div>
      </div>

      <div class="ad-unit">
        <div class="ad-label">Monetag Rewarded Ad - +300</div>
        <button id="rewardedAdBtn2">üé¨ Watch Rewarded Ad (+300)</button>
        <div class="ad-status" id="adStatus2">‚è≥ Loading ad service...</div>
      </div>

      <div class="ad-unit">
        <div class="ad-label">Monetag Rewarded Ad - +200</div>
        <button id="rewardedAdBtn3">üí∞ Watch Rewarded Ad (+200)</button>
        <div class="ad-status" id="adStatus3">‚è≥ Loading ad service...</div>
      </div>
    </div>

    <div class="card">
      <h3>Withdraw Earnings</h3>
      <p>Minimum withdrawal: 25,000 Coins = ‚Çπ20</p>
      <input type="number" id="coinAmount" placeholder="Enter Coin Amount"/>
      <input type="email" id="paypalEmail" placeholder="Enter PayPal Email"/>
      <button id="requestWithdrawal">Request PayPal Withdrawal</button>
      <div id="withdrawResult"></div>
    </div>
  </div>

  <footer><p>¬© 2025 Notcoin ‚Äî Earn rewards by watching ads</p></footer>

  <script>
    let coins = 10950;
    const balanceEl = document.getElementById('balance');
    function updateBalance() { balanceEl.innerText = coins + ' Coins'; }
    updateBalance();

    const buttons = [
      {btnId:'rewardedAdBtn1', statusId:'adStatus1', reward:250},
      {btnId:'rewardedAdBtn2', statusId:'adStatus2', reward:300},
      {btnId:'rewardedAdBtn3', statusId:'adStatus3', reward:200}
    ];

    const loadingOverlay = document.getElementById('loadingOverlay');
    const loadingText = document.getElementById('loadingText');

    function setAllButtonsDisabled(disabled, message){
      buttons.forEach(b=>{
        const btn=document.getElementById(b.btnId);
        const status=document.getElementById(b.statusId);
        btn.disabled=disabled;
        if(message) status.textContent=message;
      });
    }

    setAllButtonsDisabled(true, '‚è≥ Initializing ad service...');

    function waitForSDK(timeoutMs=10000){
      return new Promise(resolve=>{
        const start=Date.now();
        function check(){
          if(typeof window.show_10047074==='function') resolve(true);
          else if(Date.now()-start>timeoutMs) resolve(false);
          else setTimeout(check,200);
        }
        check();
      });
    }

    async function initAds(){
      const ok=await waitForSDK(10000);
      if(ok) setAllButtonsDisabled(false,'‚úÖ Ad ready! Click to watch');
      else setAllButtonsDisabled(false,'‚ö†Ô∏è SDK failed to load (fallback mode)');
    }

    async function showRewardedAd(reward, btnId, statusId){
      const btn=document.getElementById(btnId);
      const st=document.getElementById(statusId);
      btn.disabled=true;
      st.textContent='üîÑ Loading ad...';
      loadingOverlay.style.display='flex';

      try{
        if(typeof window.show_10047074==='function'){
          const res=window.show_10047074();
          if(res && typeof res.then==='function') await res;
          else await new Promise(r=>setTimeout(r,2000));
        }else await new Promise(r=>setTimeout(r,2000));

        loadingOverlay.style.display='none';
        coins+=reward;
        updateBalance();
        st.textContent=`‚úÖ Earned ${reward} coins!`;
        st.style.color='lightgreen';
      }catch(err){
        loadingOverlay.style.display='none';
        st.textContent='‚ùå Ad failed. Try again.';
        st.style.color='red';
      }finally{
        setTimeout(()=>{
          btn.disabled=false;
          st.textContent='Ready to watch again';
          st.style.color='orange';
        },30000);
      }
    }

    buttons.forEach(b=>{
      document.getElementById(b.btnId)
        .addEventListener('click',()=>showRewardedAd(b.reward,b.btnId,b.statusId));
    });

    initAds();
  </script>
</body>
</html>
